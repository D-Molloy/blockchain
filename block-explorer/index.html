<!DOCTYPE html>
<html>

<head>
	<title>Block Explorer</title>

	<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
	    crossorigin="anonymous"></script>
	<!-- Compiled and minified CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">

	<!-- Compiled and minified JavaScript -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">

	<!-- Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat|Open+Sans" rel="stylesheet">
	<!-- Custom stylesheet -->
	<link rel="stylesheet" href="style.css">
</head>

<body>
	<div class="parallax-container" id="parallax_image">
		<div class="parallax">
			<img src="https://d1nz104zbf64va.cloudfront.net/dt/a/o/what-is-blockchain-the-technology-explained.jpg">
		</div>
	</div>
	<div class="row container">
		<!-- TABS -->
		<div class="col s12">
			<ul class="tabs">
				<li class="tab col s2">
					<a class="active" href="#home">Home</a>
				</li>
				<li class="tab col s2">
					<a href="#connect">1 - Connect</a>
				</li>
				<li class="tab col s2">
					<a href="#transact">2 - Transact</a>
				</li>
				<li class="tab col s2">
					<a href="#mine">3 - Mine</a>
				</li>

				<li class="tab col s2">
					<a href="#search">Consensus/Search</a>
				</li>
			</ul>
		</div>
		<!-- WELCOME -->
		<div id="home" class="col s12">
			<h3>WELCOME!</h3>
			<p>Lorem ipsum dolor amet sriracha seitan irony, heirloom church-key coloring book tofu pickled godard single-origin coffee
				man braid pabst leggings. Crucifix VHS pop-up twee, kogi synth vexillologist salvia schlitz cred pork belly pour-over.
				Quinoa tofu organic fashion axe. Kale chips yr wayfarers brunch street art sustainable, aesthetic beard unicorn succulents
				kitsch messenger bag. Fanny pack selfies fixie brooklyn microdosing cronut YOLO, biodiesel occupy dreamcatcher. Vape
				gastropub meditation fixie tousled. Waistcoat ramps tumblr, austin chartreuse schlitz pour-over. Man braid hexagon taiyaki,
				taxidermy humblebrag roof party poutine edison bulb fashion axe lo-fi sustainable blog wolf succulents celiac. Helvetica
				everyday carry adaptogen waistcoat pickled green juice authentic yuccie. Mustache blog polaroid pug meditation asymmetrical
				gastropub messenger bag cold-pressed DIY authentic vice. Venmo microdosing fixie celiac meh shoreditch, selfies bitters
				messenger bag dreamcatcher waistcoat fashion axe affogato migas.</p>

			<iframe width="560" height="315" src="https://www.youtube.com/embed/r43LhSUUGTQ" frameborder="0" allow="autoplay; encrypted-media"
			    allowfullscreen></iframe>
		</div>

		<!-- CONNECT -->
		<!-- These nodes each have a copy of the blockchain, and whenever new transactions are made or blocks mined on a node, these changes are audited and securely broadcast to every other node in the network where the local copies of the chain are updated. -->
		<div id="connect" class="col s12">
			<h3>Connect Nodes to the Blockchain Network</h3>
			<p class="tab_descrip">One of the pillars of blockchain technology is that it (the blockchain) is hosted on a <b><em>decentralized</em></b> network of nodes. Each node on keeps a record of the current blockchain, and the nodes communicate with each other to ensure the integrity of the data on the other nodes. Now we need to create the network that will host our blockchain.</p>
			<p class="tab_descrip">
			After entering a node URL and clicking the [Add Node] button, a POST request is made to this nodes <kbd>/register-and-broadcast-node</kbd> endpoint and the new node is added to this servers blockchain <kbd>networkNodes</kbd> property (as long as it doesn't exist). Then a POST request is made to every network node's <kbd>/register-node</kbd> route to add/register the new network node url to that nodes networkNodes array.  Once the rest of the network has been updated with the new node URL, a final POST request is made to the new node's <kbd>/register-nodes-bulk</kbd> route so that the new node is aware of all the other nodes URLs.
			</p>
			<p class="tab_descrip">In order to connect your node to another node, be sure that you have started another node server by entering <kbd>npm run node_[SERVER NUMBER]</kbd> (node_1 through node_5 are setup by default) in a new terminal.  Once that is running, enter the server address below and click [Add Node]. Once you're done adding nodes, it's time to move to the 2-TRANSACT tab to make some transactions!</p>
			<p class="tab_descrip"></p>
			<div class="row connect_input_div">
				<form class="col s12">
					<div class="row connect_form">
						
						<div class="input-field col s5 connect_form_input">
							<input placeholder="e.g. http://localhost:3002" id="add_node" type="text" class="validate">
							<label for="add_node">Network Node You Want To Add:</label>
						</div>
						<div class="col s5" id="button_div"><a class="waves-effect waves-light btn block_button" id="submit_node">Add Node</a></div>
					</div>
				</form>
			</div>
			<div class="connect_results row">
				<div class="connect_message_div">
					<div id="connect_message"></div>
				</div>
				<div class="col s12" id="connect_node_area">
					<div class="connect_title"></div>
					<div class="network_nodes row"></div>
				</div>
			</div>
		</div>

		<!-- TRANSACT -->
		<div id="transact" class="col s12">
			<h3>Create a Transaction</h3>
			<p class="tab_descrip">The blockchain that we're working with if built to store records of 'monetary' transactions, similar to how the Bitcoin Blockchain operates.  Transactions are simply records of how much (in our case) a sender sends to a recipient.</p>
			<p class="tab_descrip">Once you fill in the form below and click [Make Transaction] button, this transaction is given a Universally Unique Identifier (UUID) and added to your node's <kbd>pendingTransactions</kbd> array.  Then, your node will iterate over its <kbd>networkNodes</kbd> array and make POST requests to each node's <kbd>/transaction</kbd> end point which adds the transaction to that node's <kbd>pendingTransactions</kbd> array ensuring data stays up-to-date across the network.</p>
			<p class="tab_descrip">The new transaction will remain a pending transaction until a new block is mined in 3-MINE at which point it will be cemented as part of the blockchain.</p>
			<div class="row">
				<form class="col s12">
					<div class="row form_row">
						<div class="input-field col s6">
							<input placeholder="e.g. 100" id="create_amount" type="text" class="validate">
							<label for="create_amount">Amount you would like to send:</label>
						</div>
						<div class="input-field col s6">
							<input placeholder="Enter a unique identifier for your address" id="create_sender" type="text" class="validate">
							<label for="create_sender">Sender:</label>
						</div>
						<div class="input-field col s6">
							<input placeholder="Enter a unique for your recipient's address" id="create_recip" type="text" class="validate">
							<label for="create_recip">Recipient:</label>
						</div>
						<a class="waves-effect waves-light btn block_button" id="submit_trans">Make Transaction</a>
					</div>
				</form>
			</div>
			<div id="transaction_message"></div>
		</div>

		<!-- MINE -->
		<div id="mine" class="col s12">
			<h3>Mine a new Block</h3>

			<p>
				- Get request to /mine
				- find the last block in the chain, it's hash property
				- add the pending transaction to the new blocks list of transactions
				- perform the Proof of Work using the previous blocks hash and the newly created block data to get the nonce (this is the workhorse of the mining process - 100ks iterations to get the nonce)
				- `.hashblock` - the nonce is hashed with the previousblocks hash and the current block data to the new blocks hashed
				-- `createNewBlock` - then the nonce, previousblockHash and the block hash are used to create the new block.
				-  with the new block created, it is broadcast to the `/receive-new-block` endpoint
				-  `/receive-new-block` checks the hash of the last block on store on this copy of the chain along with index of the last block and compare that to the previousblock hash and index of the new block data.  If they match, the block is added to the chain array and the pending transactions are cleared.  
				-- As is the case in real life, the node that does the work to mine the new block is given a tip for its effort.  In our situation, the node is given 12.5 bitcoins?  Chickens?  ...12.5 somethings.  This tip is broadcast to the rest of the network and will be the first pendingtransaction waiting to be added to the chain once the next block is minded
			</p>
			<div id="mine_message">
			</div>
			<div id="block_div">
				<ul class="collapsible popout animated" id="block_display">
				</ul>
			</div>
			<a class="waves-effect waves-light btn block_button" id="mine_block">Mine a new block</a>
			<div id="mine_message"></div>
		</div>
		
		<!-- VIEW -->
		<div id="consensus" class="col s12">
				<h3>Check the validity of the chain</h3>
				<div id="view_content"></div>
			</div>


		<!-- VIEW -->
		<div id="view" class="col s12">
			<h3>View the Entire Blockchain</h3>
			<div id="view_content"></div>
		</div>

		<!-- SEARCH -->
		<div id="search" class="col s12">
			<h3>Search for a specific hash, block, or transaction</h3>

			<div class="row">
				<form class="col s12">
					<div class="input-field">
						<div class="row search_div">
							<div class="col s6">
								<p class="search_type_title">Search for details on a specific network node</p>
								<label for="search_node">Enter the Sender or Recipient name below:</label>
								<input placeholder="" id="address" type="text" class="validate">
							</div>
							<div class="col s4" id="search_button_div">
								<a class="waves-effect waves-light btn block_button search_buttons" data-value="address" id="submit_trans">Search Node</a>
							</div>
						</div>
						<div class="row search_div">
							<div class="col s6">
								<p class="search_type_title">Search a specific transaction</p>
								<label for="search_trans">Enter the Transaction ID you would like to search for:</label>
								<input placeholder="e.g. fdc870d0807911e8a52b0f5ffc226aa6" id="transaction" type="text" class="validate">
							</div>
							<div class="col s4" id="search_button_div">
								<a class="waves-effect waves-light btn block_button search_buttons" data-value="transaction" id="search_trans_btn">Search Transaction</a>
							</div>
						</div>
						<div class="row search_div">
							<div class="col s6">
								<p class="search_type_title">View a specific block</p>
								<label for="search_hash">Enter the hash of the block you want to view:</label>
								<input placeholder="e.g. 0000de264017ab0b8fa3e0badb6c450801856df28a0c2a1a83f9b42aa06bf63a" id="block" type="text" class="validate">
							</div>
							<div class="col s4" id="search_button_div">
								<a class="waves-effect waves-light btn block_button search_buttons" data-value="block" id="submit_trans">Search Block</a>
							</div>
						</div>
						<div id="search_results">

						</div>

					</div>
				</form>
			</div>
		</div>
	</div>
	<div class="parallax-container" id="parallax_image">
		<div class="parallax">
			<img src="https://d1nz104zbf64va.cloudfront.net/dt/a/o/what-is-blockchain-the-technology-explained.jpg">
		</div>
	</div>
	<script src="script.js"></script>
</body>

</html>